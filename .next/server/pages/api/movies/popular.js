"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/movies/popular";
exports.ids = ["pages/api/movies/popular"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = require("axios");

/***/ }),

/***/ "camelcase-keys":
/*!*********************************!*\
  !*** external "camelcase-keys" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("camelcase-keys");

/***/ }),

/***/ "lodash-es":
/*!****************************!*\
  !*** external "lodash-es" ***!
  \****************************/
/***/ ((module) => {

module.exports = import("lodash-es");;

/***/ }),

/***/ "(api)/./src/constants/images.ts":
/*!*********************************!*\
  !*** ./src/constants/images.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"IMAGES\": () => (/* binding */ IMAGES)\n/* harmony export */ });\nconst IMAGES = {\n    base_url: \"http://image.tmdb.org/t/p/\",\n    secure_base_url: \"https://image.tmdb.org/t/p/\",\n    backdrop_sizes: [\n        \"w300\",\n        \"w780\",\n        \"w1280\",\n        \"original\"\n    ],\n    logo_sizes: [\n        \"w45\",\n        \"w92\",\n        \"w154\",\n        \"w185\",\n        \"w300\",\n        \"w500\",\n        \"original\"\n    ],\n    poster_sizes: [\n        \"w92\",\n        \"w154\",\n        \"w185\",\n        \"w342\",\n        \"w500\",\n        \"w780\",\n        \"original\"\n    ],\n    profile_sizes: [\n        \"w45\",\n        \"w185\",\n        \"h632\",\n        \"original\"\n    ],\n    still_sizes: [\n        \"w92\",\n        \"w185\",\n        \"w300\",\n        \"original\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvY29uc3RhbnRzL2ltYWdlcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sS0FBSyxDQUFDQSxNQUFNLEdBQUcsQ0FBQztJQUNyQkMsUUFBUSxFQUFFLENBQTRCO0lBQ3RDQyxlQUFlLEVBQUUsQ0FBNkI7SUFDOUNDLGNBQWMsRUFBRSxDQUFDO1FBQUEsQ0FBTTtRQUFFLENBQU07UUFBRSxDQUFPO1FBQUUsQ0FBVTtJQUFBLENBQUM7SUFDckRDLFVBQVUsRUFBRSxDQUFDO1FBQUEsQ0FBSztRQUFFLENBQUs7UUFBRSxDQUFNO1FBQUUsQ0FBTTtRQUFFLENBQU07UUFBRSxDQUFNO1FBQUUsQ0FBVTtJQUFBLENBQUM7SUFDdEVDLFlBQVksRUFBRSxDQUFDO1FBQUEsQ0FBSztRQUFFLENBQU07UUFBRSxDQUFNO1FBQUUsQ0FBTTtRQUFFLENBQU07UUFBRSxDQUFNO1FBQUUsQ0FBVTtJQUFBLENBQUM7SUFDekVDLGFBQWEsRUFBRSxDQUFDO1FBQUEsQ0FBSztRQUFFLENBQU07UUFBRSxDQUFNO1FBQUUsQ0FBVTtJQUFBLENBQUM7SUFDbERDLFdBQVcsRUFBRSxDQUFDO1FBQUEsQ0FBSztRQUFFLENBQU07UUFBRSxDQUFNO1FBQUUsQ0FBVTtJQUFBLENBQUM7QUFDbEQsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21vdmllLW1hc2gvLi9zcmMvY29uc3RhbnRzL2ltYWdlcy50cz80ODBjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBJTUFHRVMgPSB7XG4gIGJhc2VfdXJsOiBcImh0dHA6Ly9pbWFnZS50bWRiLm9yZy90L3AvXCIsXG4gIHNlY3VyZV9iYXNlX3VybDogXCJodHRwczovL2ltYWdlLnRtZGIub3JnL3QvcC9cIixcbiAgYmFja2Ryb3Bfc2l6ZXM6IFtcInczMDBcIiwgXCJ3NzgwXCIsIFwidzEyODBcIiwgXCJvcmlnaW5hbFwiXSxcbiAgbG9nb19zaXplczogW1widzQ1XCIsIFwidzkyXCIsIFwidzE1NFwiLCBcIncxODVcIiwgXCJ3MzAwXCIsIFwidzUwMFwiLCBcIm9yaWdpbmFsXCJdLFxuICBwb3N0ZXJfc2l6ZXM6IFtcInc5MlwiLCBcIncxNTRcIiwgXCJ3MTg1XCIsIFwidzM0MlwiLCBcInc1MDBcIiwgXCJ3NzgwXCIsIFwib3JpZ2luYWxcIl0sXG4gIHByb2ZpbGVfc2l6ZXM6IFtcInc0NVwiLCBcIncxODVcIiwgXCJoNjMyXCIsIFwib3JpZ2luYWxcIl0sXG4gIHN0aWxsX3NpemVzOiBbXCJ3OTJcIiwgXCJ3MTg1XCIsIFwidzMwMFwiLCBcIm9yaWdpbmFsXCJdLFxufTtcbiJdLCJuYW1lcyI6WyJJTUFHRVMiLCJiYXNlX3VybCIsInNlY3VyZV9iYXNlX3VybCIsImJhY2tkcm9wX3NpemVzIiwibG9nb19zaXplcyIsInBvc3Rlcl9zaXplcyIsInByb2ZpbGVfc2l6ZXMiLCJzdGlsbF9zaXplcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/constants/images.ts\n");

/***/ }),

/***/ "(api)/./src/helpers/movies.ts":
/*!*******************************!*\
  !*** ./src/helpers/movies.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"cleanMovie\": () => (/* binding */ cleanMovie),\n/* harmony export */   \"cleanMovies\": () => (/* binding */ cleanMovies),\n/* harmony export */   \"cleanActors\": () => (/* binding */ cleanActors),\n/* harmony export */   \"getStars\": () => (/* binding */ getStars)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ \"lodash-es\");\n/* harmony import */ var _constants_images__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../constants/images */ \"(api)/./src/constants/images.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([lodash_es__WEBPACK_IMPORTED_MODULE_1__]);\nlodash_es__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];\n\n\n\nconst getGenres = async ()=>{\n    const { TMDB_KEY  } = process.env;\n    const { data: { genres  } ,  } = await axios__WEBPACK_IMPORTED_MODULE_0___default().get(`https://api.themoviedb.org/3/genre/movie/list?api_key=${TMDB_KEY}&language=en-US`);\n    return genres;\n};\nconst appendGenres = async (movies)=>{\n    const genres = await getGenres();\n    return movies.map((movie)=>({\n            ...movie,\n            genres: movie.genre_ids.map((id)=>({\n                    id,\n                    name: genres.find((g)=>g.id === id\n                    ).name\n                })\n            )\n        })\n    ).map((m)=>(0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.omit)(m, \"genre_ids\")\n    );\n};\nconst appendImageUrl = (movies)=>movies.map((movie)=>({\n            ...(0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.omit)(movie, [\n                \"poster_path\",\n                \"backdrop_path\"\n            ]),\n            posters: _constants_images__WEBPACK_IMPORTED_MODULE_2__.IMAGES.poster_sizes.map((size)=>({\n                    [size]: movie.poster_path ? _constants_images__WEBPACK_IMPORTED_MODULE_2__.IMAGES.secure_base_url + size + movie.poster_path : null\n                })\n            ).reduce((acc, curr)=>({\n                    ...acc,\n                    ...curr\n                })\n            , {}),\n            backdrops: _constants_images__WEBPACK_IMPORTED_MODULE_2__.IMAGES.backdrop_sizes.map((size)=>({\n                    [size]: movie.backdrop_path ? _constants_images__WEBPACK_IMPORTED_MODULE_2__.IMAGES.secure_base_url + size + movie.backdrop_path : null\n                })\n            ).reduce((acc, curr)=>({\n                    ...acc,\n                    ...curr\n                })\n            , {})\n        })\n    )\n;\nconst cleanMovie = (movie)=>{\n    const [withImageUrl] = appendImageUrl([\n        movie\n    ]);\n    return withImageUrl;\n};\nconst cleanMovies = async (movies)=>{\n    const withImageUrl = appendImageUrl(movies.results);\n    const withGenres = await appendGenres(withImageUrl);\n    return {\n        ...movies,\n        results: withGenres\n    };\n};\nconst cleanActors = (cast)=>cast.map((actor)=>({\n            ...actor,\n            profile_path: _constants_images__WEBPACK_IMPORTED_MODULE_2__.IMAGES.secure_base_url + \"w185\" + actor.profile_path\n        })\n    )\n;\nconst getStars = (a)=>{\n    if (!a) return {};\n    const divided = Math.round(a / 2 * 2) / 2;\n    const value = (0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.isInteger)(divided) ? divided : divided - 0.5;\n    return {\n        withHalf: (0,lodash_es__WEBPACK_IMPORTED_MODULE_1__.isInteger)(divided),\n        value,\n        starsFull: Array.from(Array(value).keys()),\n        starsEmpty: Array.from(Array(5 - value).keys())\n    };\n};\n\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQyxXQUFXLElBQUlDLElBQUksR0FDOUJBLElBQUksQ0FBQzFCLEdBQUcsRUFBRTJCLEtBQUssSUFBTSxDQUFDO2VBQ2pCQSxLQUFLO1lBQ1JDLFlBQVksRUFBRXRDLHFFQUFzQixHQUFHLENBQU0sUUFBR3FDLEtBQUssQ0FBQ0MsWUFBWTtRQUNwRSxDQUFDOzs7QUFFSSxLQUFLLENBQUNDLFFBQVEsSUFBSUMsQ0FBQyxHQUFLLENBQUM7SUFDOUIsRUFBRSxHQUFHQSxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNqQixLQUFLLENBQUNDLE9BQU8sR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUVILENBQUMsR0FBRyxDQUFDLEdBQUksQ0FBQyxJQUFJLENBQUM7SUFDM0MsS0FBSyxDQUFDSSxLQUFLLEdBQUc5QyxvREFBUyxDQUFDMkMsT0FBTyxJQUFJQSxPQUFPLEdBQUdBLE9BQU8sR0FBRyxHQUFHO0lBRTFELE1BQU0sQ0FBQyxDQUFDO1FBQ05JLFFBQVEsRUFBRS9DLG9EQUFTLENBQUMyQyxPQUFPO1FBQzNCRyxLQUFLO1FBQ0xFLFNBQVMsRUFBRUMsS0FBSyxDQUFDQyxJQUFJLENBQUNELEtBQUssQ0FBQ0gsS0FBSyxFQUFFSyxJQUFJO1FBQ3ZDQyxVQUFVLEVBQUVILEtBQUssQ0FBQ0MsSUFBSSxDQUFDRCxLQUFLLENBQUMsQ0FBQyxHQUFHSCxLQUFLLEVBQUVLLElBQUk7SUFDOUMsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb3ZpZS1tYXNoLy4vc3JjL2hlbHBlcnMvbW92aWVzLnRzPzdkMDIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IHsgaXNJbnRlZ2VyLCBvbWl0IH0gZnJvbSBcImxvZGFzaC1lc1wiO1xuaW1wb3J0IHsgSU1BR0VTIH0gZnJvbSBcIi4uL2NvbnN0YW50cy9pbWFnZXNcIjtcblxuY29uc3QgZ2V0R2VucmVzID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCB7IFRNREJfS0VZIH0gPSBwcm9jZXNzLmVudjtcbiAgY29uc3Qge1xuICAgIGRhdGE6IHsgZ2VucmVzIH0sXG4gIH0gPSBhd2FpdCBheGlvcy5nZXQoXG4gICAgYGh0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvZ2VucmUvbW92aWUvbGlzdD9hcGlfa2V5PSR7VE1EQl9LRVl9Jmxhbmd1YWdlPWVuLVVTYFxuICApO1xuXG4gIHJldHVybiBnZW5yZXM7XG59O1xuXG5jb25zdCBhcHBlbmRHZW5yZXMgPSBhc3luYyAobW92aWVzKSA9PiB7XG4gIGNvbnN0IGdlbnJlcyA9IGF3YWl0IGdldEdlbnJlcygpO1xuXG4gIHJldHVybiBtb3ZpZXNcbiAgICAubWFwKChtb3ZpZSkgPT4gKHtcbiAgICAgIC4uLm1vdmllLFxuICAgICAgZ2VucmVzOiBtb3ZpZS5nZW5yZV9pZHMubWFwKChpZCkgPT4gKHtcbiAgICAgICAgaWQsXG4gICAgICAgIG5hbWU6IGdlbnJlcy5maW5kKChnKSA9PiBnLmlkID09PSBpZCkubmFtZSxcbiAgICAgIH0pKSxcbiAgICB9KSlcbiAgICAubWFwKChtKSA9PiBvbWl0KG0sIFwiZ2VucmVfaWRzXCIpKTtcbn07XG5cbmNvbnN0IGFwcGVuZEltYWdlVXJsID0gKG1vdmllcykgPT5cbiAgbW92aWVzLm1hcCgobW92aWUpID0+ICh7XG4gICAgLi4ub21pdChtb3ZpZSwgW1wicG9zdGVyX3BhdGhcIiwgXCJiYWNrZHJvcF9wYXRoXCJdKSxcbiAgICBwb3N0ZXJzOiBJTUFHRVMucG9zdGVyX3NpemVzXG4gICAgICAubWFwKChzaXplKSA9PiAoe1xuICAgICAgICBbc2l6ZV06IG1vdmllLnBvc3Rlcl9wYXRoXG4gICAgICAgICAgPyBJTUFHRVMuc2VjdXJlX2Jhc2VfdXJsICsgc2l6ZSArIG1vdmllLnBvc3Rlcl9wYXRoXG4gICAgICAgICAgOiBudWxsLFxuICAgICAgfSkpXG4gICAgICAucmVkdWNlKChhY2MsIGN1cnIpID0+ICh7IC4uLmFjYywgLi4uY3VyciB9KSwge30pLFxuICAgIGJhY2tkcm9wczogSU1BR0VTLmJhY2tkcm9wX3NpemVzXG4gICAgICAubWFwKChzaXplKSA9PiAoe1xuICAgICAgICBbc2l6ZV06IG1vdmllLmJhY2tkcm9wX3BhdGhcbiAgICAgICAgICA/IElNQUdFUy5zZWN1cmVfYmFzZV91cmwgKyBzaXplICsgbW92aWUuYmFja2Ryb3BfcGF0aFxuICAgICAgICAgIDogbnVsbCxcbiAgICAgIH0pKVxuICAgICAgLnJlZHVjZSgoYWNjLCBjdXJyKSA9PiAoeyAuLi5hY2MsIC4uLmN1cnIgfSksIHt9KSxcbiAgfSkpO1xuXG5leHBvcnQgY29uc3QgY2xlYW5Nb3ZpZSA9IChtb3ZpZSkgPT4ge1xuICBjb25zdCBbd2l0aEltYWdlVXJsXSA9IGFwcGVuZEltYWdlVXJsKFttb3ZpZV0pO1xuXG4gIHJldHVybiB3aXRoSW1hZ2VVcmw7XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYW5Nb3ZpZXMgPSBhc3luYyAobW92aWVzKSA9PiB7XG4gIGNvbnN0IHdpdGhJbWFnZVVybCA9IGFwcGVuZEltYWdlVXJsKG1vdmllcy5yZXN1bHRzKTtcbiAgY29uc3Qgd2l0aEdlbnJlcyA9IGF3YWl0IGFwcGVuZEdlbnJlcyh3aXRoSW1hZ2VVcmwpO1xuXG4gIHJldHVybiB7XG4gICAgLi4ubW92aWVzLFxuICAgIHJlc3VsdHM6IHdpdGhHZW5yZXMsXG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgY2xlYW5BY3RvcnMgPSAoY2FzdCkgPT5cbiAgY2FzdC5tYXAoKGFjdG9yKSA9PiAoe1xuICAgIC4uLmFjdG9yLFxuICAgIHByb2ZpbGVfcGF0aDogSU1BR0VTLnNlY3VyZV9iYXNlX3VybCArIFwidzE4NVwiICsgYWN0b3IucHJvZmlsZV9wYXRoLFxuICB9KSk7XG5cbmV4cG9ydCBjb25zdCBnZXRTdGFycyA9IChhKSA9PiB7XG4gIGlmICghYSkgcmV0dXJuIHt9O1xuICBjb25zdCBkaXZpZGVkID0gTWF0aC5yb3VuZCgoYSAvIDIpICogMikgLyAyO1xuICBjb25zdCB2YWx1ZSA9IGlzSW50ZWdlcihkaXZpZGVkKSA/IGRpdmlkZWQgOiBkaXZpZGVkIC0gMC41O1xuXG4gIHJldHVybiB7XG4gICAgd2l0aEhhbGY6IGlzSW50ZWdlcihkaXZpZGVkKSxcbiAgICB2YWx1ZSxcbiAgICBzdGFyc0Z1bGw6IEFycmF5LmZyb20oQXJyYXkodmFsdWUpLmtleXMoKSksXG4gICAgc3RhcnNFbXB0eTogQXJyYXkuZnJvbShBcnJheSg1IC0gdmFsdWUpLmtleXMoKSksXG4gIH07XG59O1xuIl0sIm5hbWVzIjpbImF4aW9zIiwiaXNJbnRlZ2VyIiwib21pdCIsIklNQUdFUyIsImdldEdlbnJlcyIsIlRNREJfS0VZIiwicHJvY2VzcyIsImVudiIsImRhdGEiLCJnZW5yZXMiLCJnZXQiLCJhcHBlbmRHZW5yZXMiLCJtb3ZpZXMiLCJtYXAiLCJtb3ZpZSIsImdlbnJlX2lkcyIsImlkIiwibmFtZSIsImZpbmQiLCJnIiwibSIsImFwcGVuZEltYWdlVXJsIiwicG9zdGVycyIsInBvc3Rlcl9zaXplcyIsInNpemUiLCJwb3N0ZXJfcGF0aCIsInNlY3VyZV9iYXNlX3VybCIsInJlZHVjZSIsImFjYyIsImN1cnIiLCJiYWNrZHJvcHMiLCJiYWNrZHJvcF9zaXplcyIsImJhY2tkcm9wX3BhdGgiLCJjbGVhbk1vdmllIiwid2l0aEltYWdlVXJsIiwiY2xlYW5Nb3ZpZXMiLCJyZXN1bHRzIiwid2l0aEdlbnJlcyIsImNsZWFuQWN0b3JzIiwiY2FzdCIsImFjdG9yIiwicHJvZmlsZV9wYXRoIiwiZ2V0U3RhcnMiLCJhIiwiZGl2aWRlZCIsIk1hdGgiLCJyb3VuZCIsInZhbHVlIiwid2l0aEhhbGYiLCJzdGFyc0Z1bGwiLCJBcnJheSIsImZyb20iLCJrZXlzIiwic3RhcnNFbXB0eSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/helpers/movies.ts\n");

/***/ }),

/***/ "(api)/./src/helpers/prisma.ts":
/*!*******************************!*\
  !*** ./src/helpers/prisma.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst prisma = global.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient({\n    log: [\n        \"query\"\n    ]\n});\nif (true) global.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvaGVscGVycy9wcmlzbWEudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTZDO0FBUzdDLEtBQUssQ0FBQ0MsTUFBTSxHQUNWQyxNQUFNLENBQUNELE1BQU0sSUFDYixHQUFHLENBQUNELHdEQUFZLENBQUMsQ0FBQztJQUNoQkcsR0FBRyxFQUFFLENBQUM7UUFBQSxDQUFPO0lBQUEsQ0FBQztBQUNoQixDQUFDO0FBRUgsRUFBRSxFQWZGLElBZXlDLEVBQUVELE1BQU0sQ0FBQ0QsTUFBTSxHQUFHQSxNQUFNO0FBRWpFLGlFQUFlQSxNQUFNLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tb3ZpZS1tYXNoLy4vc3JjL2hlbHBlcnMvcHJpc21hLnRzPzdmNTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgLy8gYWxsb3cgZ2xvYmFsIGB2YXJgIGRlY2xhcmF0aW9uc1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdmFyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICB2YXIgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IHByaXNtYSA9XG4gIGdsb2JhbC5wcmlzbWEgfHxcbiAgbmV3IFByaXNtYUNsaWVudCh7XG4gICAgbG9nOiBbXCJxdWVyeVwiXSxcbiAgfSk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIGdsb2JhbC5wcmlzbWEgPSBwcmlzbWE7XG5cbmV4cG9ydCBkZWZhdWx0IHByaXNtYTtcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJnbG9iYWwiLCJsb2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/helpers/prisma.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/movies/popular.ts":
/*!*****************************************!*\
  !*** ./src/pages/api/movies/popular.ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__) => {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _src_helpers_movies__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/src/helpers/movies */ \"(api)/./src/helpers/movies.ts\");\n/* harmony import */ var _src_helpers_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/src/helpers/prisma */ \"(api)/./src/helpers/prisma.ts\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var camelcase_keys__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! camelcase-keys */ \"camelcase-keys\");\n/* harmony import */ var camelcase_keys__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(camelcase_keys__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_helpers_movies__WEBPACK_IMPORTED_MODULE_0__]);\n_src_helpers_movies__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? await __webpack_async_dependencies__ : __webpack_async_dependencies__)[0];\n\n\n\n\nconst Popular = async (req, res)=>{\n    if (req.method === \"POST\") {\n        return;\n    }\n    const { page =1  } = req.query;\n    const { TMDB_KEY  } = process.env;\n    try {\n        const { data: popularMovies  } = await axios__WEBPACK_IMPORTED_MODULE_2___default().get(`https://api.themoviedb.org/3/movie/popular?api_key=${TMDB_KEY}&language=en-US&page=${page}`);\n        const ourMovies = await _src_helpers_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].movies.findMany({\n            where: {\n                id: {\n                    in: popularMovies.results.map((movie)=>movie.id.toString()\n                    )\n                }\n            }\n        });\n        const newData = await (0,_src_helpers_movies__WEBPACK_IMPORTED_MODULE_0__.cleanMovies)(popularMovies);\n        res.json(camelcase_keys__WEBPACK_IMPORTED_MODULE_3___default()({\n            ...newData,\n            results: newData.results.map((m)=>({\n                    ...m,\n                    ...ourMovies.find((mov)=>parseInt(mov.id) === parseInt(m.id)\n                    ) || {}\n                })\n            )\n        }, {\n            deep: true\n        }));\n    } catch (e) {\n        // eslint-disable-next-line no-console\n        console.log(e);\n        res.status(500).json(e);\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Popular);\n\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL21vdmllcy9wb3B1bGFyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDVDtBQUVoQjtBQUNpQjtBQUkxQyxLQUFLLENBQUNJLE9BQU8sVUFBVUMsR0FBbUIsRUFBRUMsR0FBb0IsR0FBSyxDQUFDO0lBQ3BFLEVBQUUsRUFBRUQsR0FBRyxDQUFDRSxNQUFNLEtBQUssQ0FBTSxPQUFFLENBQUM7UUFDMUIsTUFBTTtJQUNSLENBQUM7SUFDRCxLQUFLLENBQUMsQ0FBQyxDQUFDQyxJQUFJLEVBQUcsQ0FBQyxFQUFDLENBQUMsR0FBR0gsR0FBRyxDQUFDSSxLQUFLO0lBQzlCLEtBQUssQ0FBQyxDQUFDLENBQUNDLFFBQVEsRUFBQyxDQUFDLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRztJQUVoQyxHQUFHLENBQUMsQ0FBQztRQUNILEtBQUssQ0FBQyxDQUFDLENBQUNDLElBQUksRUFBRUMsYUFBYSxFQUFDLENBQUMsR0FBRyxLQUFLLENBQUNaLGdEQUFTLEVBQzVDLG1EQUFtRCxFQUFFUSxRQUFRLENBQUMscUJBQXFCLEVBQUVGLElBQUk7UUFHNUYsS0FBSyxDQUFDUSxTQUFTLEdBQUcsS0FBSyxDQUFDZiwyRUFBc0IsQ0FBQyxDQUFDO1lBQzlDa0IsS0FBSyxFQUFFLENBQUM7Z0JBQ05DLEVBQUUsRUFBRSxDQUFDO29CQUNIQyxFQUFFLEVBQUVQLGFBQWEsQ0FBQ1EsT0FBTyxDQUFDQyxHQUFHLEVBQUVDLEtBQUssR0FBS0EsS0FBSyxDQUFDSixFQUFFLENBQUNLLFFBQVE7O2dCQUM1RCxDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7UUFFRCxLQUFLLENBQUNDLE9BQU8sR0FBRyxLQUFLLENBQUMxQixnRUFBVyxDQUFDYyxhQUFhO1FBRS9DUixHQUFHLENBQUNxQixJQUFJLENBQ054QixxREFBYSxDQUNYLENBQUM7ZUFDSXVCLE9BQU87WUFDVkosT0FBTyxFQUFFSSxPQUFPLENBQUNKLE9BQU8sQ0FBQ0MsR0FBRyxFQUFFSyxDQUFDLElBQU0sQ0FBQzt1QkFDakNBLENBQUM7dUJBQ0FaLFNBQVMsQ0FBQ2EsSUFBSSxFQUFFQyxHQUFHLEdBQUtDLFFBQVEsQ0FBQ0QsR0FBRyxDQUFDVixFQUFFLE1BQU1XLFFBQVEsQ0FBQ0gsQ0FBQyxDQUFDUixFQUFFO3lCQUM1RCxDQUFDLENBQUM7Z0JBQ04sQ0FBQzs7UUFDSCxDQUFDLEVBQ0QsQ0FBQztZQUFDWSxJQUFJLEVBQUUsSUFBSTtRQUFDLENBQUM7SUFHcEIsQ0FBQyxDQUFDLEtBQUssRUFBRUMsQ0FBQyxFQUFFLENBQUM7UUFDWCxFQUFzQztRQUN0Q0MsT0FBTyxDQUFDQyxHQUFHLENBQUNGLENBQUM7UUFDYjNCLEdBQUcsQ0FBQzhCLE1BQU0sQ0FBQyxHQUFHLEVBQUVULElBQUksQ0FBQ00sQ0FBQztJQUN4QixDQUFDO0FBQ0gsQ0FBQztBQUVELGlFQUFlN0IsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW92aWUtbWFzaC8uL3NyYy9wYWdlcy9hcGkvbW92aWVzL3BvcHVsYXIudHM/ZjJjOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjbGVhbk1vdmllcyB9IGZyb20gXCJAL3NyYy9oZWxwZXJzL21vdmllc1wiO1xuaW1wb3J0IHByaXNtYSBmcm9tIFwiQC9zcmMvaGVscGVycy9wcmlzbWFcIjtcblxuaW1wb3J0IGF4aW9zIGZyb20gXCJheGlvc1wiO1xuaW1wb3J0IGNhbWVsY2FzZUtleXMgZnJvbSBcImNhbWVsY2FzZS1rZXlzXCI7XG5cbmltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gXCJuZXh0XCI7XG5cbmNvbnN0IFBvcHVsYXIgPSBhc3luYyAocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpID0+IHtcbiAgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHsgcGFnZSA9IDEgfSA9IHJlcS5xdWVyeTtcbiAgY29uc3QgeyBUTURCX0tFWSB9ID0gcHJvY2Vzcy5lbnY7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHBvcHVsYXJNb3ZpZXMgfSA9IGF3YWl0IGF4aW9zLmdldChcbiAgICAgIGBodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3BvcHVsYXI/YXBpX2tleT0ke1RNREJfS0VZfSZsYW5ndWFnZT1lbi1VUyZwYWdlPSR7cGFnZX1gXG4gICAgKTtcblxuICAgIGNvbnN0IG91ck1vdmllcyA9IGF3YWl0IHByaXNtYS5tb3ZpZXMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IHtcbiAgICAgICAgICBpbjogcG9wdWxhck1vdmllcy5yZXN1bHRzLm1hcCgobW92aWUpID0+IG1vdmllLmlkLnRvU3RyaW5nKCkpLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IG5ld0RhdGEgPSBhd2FpdCBjbGVhbk1vdmllcyhwb3B1bGFyTW92aWVzKTtcblxuICAgIHJlcy5qc29uKFxuICAgICAgY2FtZWxjYXNlS2V5cyhcbiAgICAgICAge1xuICAgICAgICAgIC4uLm5ld0RhdGEsXG4gICAgICAgICAgcmVzdWx0czogbmV3RGF0YS5yZXN1bHRzLm1hcCgobSkgPT4gKHtcbiAgICAgICAgICAgIC4uLm0sXG4gICAgICAgICAgICAuLi4ob3VyTW92aWVzLmZpbmQoKG1vdikgPT4gcGFyc2VJbnQobW92LmlkKSA9PT0gcGFyc2VJbnQobS5pZCkpIHx8XG4gICAgICAgICAgICAgIHt9KSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0sXG4gICAgICAgIHsgZGVlcDogdHJ1ZSB9XG4gICAgICApXG4gICAgKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgY29uc29sZS5sb2coZSk7XG4gICAgcmVzLnN0YXR1cyg1MDApLmpzb24oZSk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVsYXI7XG4iXSwibmFtZXMiOlsiY2xlYW5Nb3ZpZXMiLCJwcmlzbWEiLCJheGlvcyIsImNhbWVsY2FzZUtleXMiLCJQb3B1bGFyIiwicmVxIiwicmVzIiwibWV0aG9kIiwicGFnZSIsInF1ZXJ5IiwiVE1EQl9LRVkiLCJwcm9jZXNzIiwiZW52IiwiZGF0YSIsInBvcHVsYXJNb3ZpZXMiLCJnZXQiLCJvdXJNb3ZpZXMiLCJtb3ZpZXMiLCJmaW5kTWFueSIsIndoZXJlIiwiaWQiLCJpbiIsInJlc3VsdHMiLCJtYXAiLCJtb3ZpZSIsInRvU3RyaW5nIiwibmV3RGF0YSIsImpzb24iLCJtIiwiZmluZCIsIm1vdiIsInBhcnNlSW50IiwiZGVlcCIsImUiLCJjb25zb2xlIiwibG9nIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/movies/popular.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/movies/popular.ts"));
module.exports = __webpack_exports__;

})();